<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NS Holdings - Product Slider</title>
    <link rel="stylesheet" href="https://api.fontshare.com/v2/css?f[]=archivo@100,200,300,400,500,600,700,800,900&f[]=clash-display@200,300,400,500,600,700&display=swap">
    <style>
        :root {
            --slide-width: min(25vw, 300px);
            --slide-aspect: 2 / 3;
            --slide-transition-duration: 800ms;
            --slide-transition-easing: ease;
            --font-archivo: "Archivo", sans-serif;
            --font-clash-display: "Clash Display", sans-serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
        }

        body {
            display: grid;
            place-items: center;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.787);
        }

        button {
            border: none;
            background: none;
            cursor: pointer;
        }

        button:focus {
            outline: none;
            border: none;
        }

        /* SLIDER */
        .slider {
            width: calc(3 * var(--slide-width));
            height: calc(2 * var(--slide-height));
            display: flex;
            align-items: center;
        }

        .slider--btn {
            --size: 40px;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            opacity: 0.7;
            transition: opacity 250ms cubic-bezier(0.215, 0.61, 0.355, 1);
            z-index: 999;
        }

        .slider--btn svg {
            width: var(--size);
            height: var(--size);
            stroke: white;
        }

        .slider--btn:hover {
            opacity: 1;
        }

        .slides__wrapper {
            width: 100%;
            height: 100%;
            display: grid;
            place-items: center;
        }

        .slides__wrapper > * {
            grid-area: 1 / -1;
        }

        .slides, .slides--infos {
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: grid;
            place-items: center;
        }

        .slides > *, .slides--infos > * {
            grid-area: 1 / -1;
        }

        /* SLIDE */
        .slide {
            --slide-tx: 0px;
            --slide-ty: 0vh;
            --padding: 0px;
            --offset: 0;
            width: var(--slide-width);
            height: auto;
            aspect-ratio: var(--slide-aspect);
            user-select: none;
            perspective: 800px;
            transform: perspective(1000px)
                translate3d(var(--slide-tx), var(--slide-ty), var(--slide-tz, 0))
                rotateY(var(--slide-rotY)) scale(var(--slide-scale));
            transition: transform var(--slide-transition-duration) var(--slide-transition-easing),
                        opacity var(--slide-transition-duration) var(--slide-transition-easing);
            opacity: 0;
            pointer-events: none;
        }

        .slide[data-current] {
            --slide-scale: 1.2;
            --slide-tz: 0px;
            --slide-tx: 0px;
            --slide-rotY: 0;
            pointer-events: auto;
            opacity: 1;
            z-index: 20;
        }

        .slide[data-next] {
            --slide-tx: calc(1 * var(--slide-width) * 1.07);
            --slide-rotY: -45deg;
            --slide-scale: 1;
            --slide-tz: 0;
            opacity: 1;
            z-index: 10;
        }

        .slide[data-previous] {
            --slide-tx: calc(-1 * var(--slide-width) * 1.07);
            --slide-rotY: 45deg;
            --slide-scale: 1;
            --slide-tz: 0;
            opacity: 1;
            z-index: 10;
        }

        .slide[data-current] .slide--image {
            filter: brightness(0.8);
        }

        .slide:not([data-current]) .slide--image {
            filter: brightness(0.5);
        }

        .slide__inner {
            --rotX: 0;
            --rotY: 0;
            --bgPosX: 0%;
            --bgPosY: 0%;
            position: relative;
            left: calc(var(--padding) / 2);
            top: calc(var(--padding) / 2);
            width: calc(100% - var(--padding));
            height: calc(100% - var(--padding));
            transform-style: preserve-3d;
            transform: rotateX(var(--rotX)) rotateY(var(--rotY));
        }

        .slide--image__wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .slide--image {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 50%;
            left: 50%;
            object-fit: cover;
            transform: translate(-50%, -50%) scale(1.25) translate3d(var(--bgPosX), var(--bgPosY), 0);
            transition: filter var(--slide-transition-duration) var(--slide-transition-easing);
        }

        .slide__bg {
            position: fixed;
            inset: -20%;
            background-image: var(--bg);
            background-size: cover;
            background-position: center center;
            z-index: -1;
            pointer-events: none;
            transition: opacity var(--slide-transition-duration) ease,
                        transform var(--slide-transition-duration) ease;
            opacity: 0;
        }

        .slide__bg::before {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
        }

        .slide__bg[data-current] {
            opacity: 1;
            transform: translateX(0);
        }

        .slide__bg[data-previous] {
            transform: translateX(-10%);
        }

        .slide__bg[data-next] {
            transform: translateX(10%);
        }

        /* SLIDE INFO */
        .slide-info {
            --padding: 0px;
            position: relative;
            width: var(--slide-width);
            height: 100%;
            aspect-ratio: var(--slide-aspect);
            user-select: none;
            perspective: 800px;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
        }

        .slide-info[data-current] {
            opacity: 1;
        }

        .slide-info[data-current] .slide-info--text span {
            opacity: 1;
            transform: translate3d(0, 0, 0);
            transition-delay: 250ms;
        }

        .slide-info:not([data-current]) .slide-info--text span {
            opacity: 0;
            transform: translate3d(0, 100%, 0);
            transition-delay: 0ms;
        }

        .slide-info__inner {
            position: relative;
            left: calc(var(--padding) / 2);
            top: calc(var(--padding) / 2);
            width: calc(100% - var(--padding));
            height: calc(100% - var(--padding));
            transform-style: preserve-3d;
            transform: rotateX(var(--rotX)) rotateY(var(--rotY));
        }

        .slide-info--text__wrapper {
            --z-offset: 45px;
            position: absolute;
            height: fit-content;
            left: -15%;
            bottom: 15%;
            transform: translateZ(var(--z-offset));
            z-index: 2;
            pointer-events: none;
        }

        .slide-info--text {
            font-family: var(--font-clash-display);
            color: #fff;
            overflow: hidden;
        }

        .slide-info--text span {
            display: block;
            white-space: nowrap;
            transition: var(--slide-transition-duration) var(--slide-transition-easing);
            transition-property: opacity, transform;
        }

        .slide-info--text[data-title],
        .slide-info--text[data-subtitle] {
            font-size: min(3cqw, 2.4rem);
            font-weight: 800;
            letter-spacing: 0.2cqw;
            white-space: nowrap;
            text-transform: uppercase;
        }

        .slide-info--text[data-subtitle] {
            margin-left: 2cqw;
            font-size: min(2.2cqw, 1.8rem);
            font-weight: 600;
        }

        .slide-info--text[data-description] {
            margin-left: 1cqw;
            font-size: min(1.5cqw, 0.95rem);
            font-family: var(--font-archivo);
            font-weight: 300;
        }

        /* LOADER */
        .loader {
            position: fixed;
            inset: 0;
            display: grid;
            place-items: center;
            background: #000;
            z-index: 1000;
            opacity: 1;
            transition: opacity 0.5s ease-out;
        }

        .loader__text {
            font-family: var(--font-clash-display);
            font-size: clamp(2rem, 2vw, 5rem);
            font-weight: 800;
            color: #fff;
        }

        /* Counter */
        .slide-counter {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-clash-display);
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="slider">
        <button class="slider--btn slider--btn__prev">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m15 18-6-6 6-6" />
            </svg>
        </button>

        <div class="slides__wrapper">
            <div class="slides">
                <!-- Slide 1 - Safety Helmet -->
                <div class="slide" data-index="0">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/safety-helmet.png" alt="Safety Helmet" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="0" style="--bg: url(./assets/images/safety-helmet.png)"></div>

                <!-- Slide 2 - Safety Boot Yellow -->
                <div class="slide" data-index="1">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/safety-boot-yellow-steel.jpg" alt="Safety Boot Yellow" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="1" style="--bg: url(./assets/images/safety-boot-yellow-steel.jpg)"></div>

                <!-- Slide 3 - Fire Extinguisher -->
                <div class="slide" data-index="2">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/extinguisher.png" alt="Fire Extinguisher" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="2" style="--bg: url(./assets/images/extinguisher.png)"></div>

                <!-- Slide 4 - Spill Kit -->
                <div class="slide" data-index="3">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/spill-kit.jpeg" alt="Spill Kit" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="3" style="--bg: url(./assets/images/spill-kit.jpeg)"></div>

                <!-- Slide 5 - Auto Darkening Welding Helmet -->
                <div class="slide" data-index="4">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/auto-darking-welding-helmet.jpeg" alt="Auto Darkening Welding Helmet" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="4" style="--bg: url(./assets/images/auto-darking-welding-helmet.jpeg)"></div>

                <!-- Slide 6 - Welding Head Shield -->
                <div class="slide" data-index="5">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/welding-head-shield.jpeg" alt="Welding Head Shield" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="5" style="--bg: url(./assets/images/welding-head-shield.jpeg)"></div>

                <!-- Slide 7 - Safety Boot White -->
                <div class="slide" data-index="6">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/safety-boot-white-steel.jpg" alt="Safety Boot White" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="6" style="--bg: url(./assets/images/safety-boot-white-steel.jpg)"></div>

                <!-- Slide 8 - Lab Shoe -->
                <div class="slide" data-index="7">
                    <div class="slide__inner">
                        <div class="slide--image__wrapper">
                            <img class="slide--image" src="./assets/images/lab-shoe1.jpg" alt="Lab Shoe" />
                        </div>
                    </div>
                </div>
                <div class="slide__bg" data-index="7" style="--bg: url(./assets/images/lab-shoe1.jpg)"></div>
            </div>

            <div class="slides--infos">
                <!-- Info 1 -->
                <div class="slide-info" data-index="0">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Safety Helmet</span></div>
                            <div data-subtitle class="slide-info--text"><span>Protection</span></div>
                            <div data-description class="slide-info--text"><span>Head protection essentials</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 2 -->
                <div class="slide-info" data-index="1">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Safety Boot</span></div>
                            <div data-subtitle class="slide-info--text"><span>Footwear</span></div>
                            <div data-description class="slide-info--text"><span>Yellow steel safety boots</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 3 -->
                <div class="slide-info" data-index="2">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Fire Safety</span></div>
                            <div data-subtitle class="slide-info--text"><span>Equipment</span></div>
                            <div data-description class="slide-info--text"><span>Emergency response ready</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 4 -->
                <div class="slide-info" data-index="3">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Spill Kit</span></div>
                            <div data-subtitle class="slide-info--text"><span>Cleanup</span></div>
                            <div data-description class="slide-info--text"><span>Quick response solutions</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 5 -->
                <div class="slide-info" data-index="4">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Welding Helmet</span></div>
                            <div data-subtitle class="slide-info--text"><span>Welding</span></div>
                            <div data-description class="slide-info--text"><span>Auto-darkening protection</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 6 -->
                <div class="slide-info" data-index="5">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Head Shield</span></div>
                            <div data-subtitle class="slide-info--text"><span>Protection</span></div>
                            <div data-description class="slide-info--text"><span>Welding head protection</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 7 -->
                <div class="slide-info" data-index="6">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>White Safety Boot</span></div>
                            <div data-subtitle class="slide-info--text"><span>Footwear</span></div>
                            <div data-description class="slide-info--text"><span>Professional white steel</span></div>
                        </div>
                    </div>
                </div>

                <!-- Info 8 -->
                <div class="slide-info" data-index="7">
                    <div class="slide-info__inner">
                        <div class="slide-info--text__wrapper">
                            <div data-title class="slide-info--text"><span>Lab Shoe</span></div>
                            <div data-subtitle class="slide-info--text"><span>Footwear</span></div>
                            <div data-description class="slide-info--text"><span>Laboratory protection</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button class="slider--btn slider--btn__next">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m9 18 6-6-6-6" />
            </svg>
        </button>
    </div>

    <div class="slide-counter">
        <span class="current-slide">1</span> / <span class="total-slides">8</span>
    </div>

    <div class="loader">
        <span class="loader__text">0%</span>
    </div>

    <script type="module">
        import imagesLoaded from "https://esm.sh/imagesloaded";

        // Utilities
        const wrap = (n, max) => ((n % max) + max) % max;
        const lerp = (a, b, t) => a + (b - a) * t;

        const genId = (() => {
            let count = 0;
            return () => (count++).toString();
        })();

        class Raf {
            constructor() {
                this.rafId = 0;
                this.raf = this.raf.bind(this);
                this.callbacks = [];
                this.start();
            }

            start() { this.raf(); }
            stop() { cancelAnimationFrame(this.rafId); }

            raf() {
                this.callbacks.forEach(({ callback, id }) => callback({ id }));
                this.rafId = requestAnimationFrame(this.raf);
            }

            add(callback, id) {
                this.callbacks.push({ callback, id: id || genId() });
            }

            remove(id) {
                this.callbacks = this.callbacks.filter((callback) => callback.id !== id);
            }
        }

        class Vec2 {
            constructor(x = 0, y = 0) {
                this.x = x;
                this.y = y;
            }

            set(x, y) {
                this.x = x;
                this.y = y;
            }

            lerp(v, t) {
                this.x = lerp(this.x, v.x, t);
                this.y = lerp(this.y, v.y, t);
            }
        }

        const vec2 = (x = 0, y = 0) => new Vec2(x, y);

        function tilt(node, options) {
            let { trigger, target } = resolveOptions(node, options);
            let lerpAmount = 0.06;

            const rotDeg = { current: vec2(), target: vec2() };
            const bgPos = { current: vec2(), target: vec2() };

            let rafId;

            function ticker({ id }) {
                rafId = id;
                rotDeg.current.lerp(rotDeg.target, lerpAmount);
                bgPos.current.lerp(bgPos.target, lerpAmount);

                for (const el of target) {
                    el.style.setProperty("--rotX", rotDeg.current.y.toFixed(2) + "deg");
                    el.style.setProperty("--rotY", rotDeg.current.x.toFixed(2) + "deg");
                    el.style.setProperty("--bgPosX", bgPos.current.x.toFixed(2) + "%");
                    el.style.setProperty("--bgPosY", bgPos.current.y.toFixed(2) + "%");
                }
            }

            const onMouseMove = ({ offsetX, offsetY }) => {
                lerpAmount = 0.1;
                for (const el of target) {
                    const ox = (offsetX - el.clientWidth * 0.5) / (Math.PI * 3);
                    const oy = -(offsetY - el.clientHeight * 0.5) / (Math.PI * 4);
                    rotDeg.target.set(ox, oy);
                    bgPos.target.set(-ox * 0.3, oy * 0.3);
                }
            };

            const onMouseLeave = () => {
                lerpAmount = 0.06;
                rotDeg.target.set(0, 0);
                bgPos.target.set(0, 0);
            };

            const addListeners = () => {
                trigger.addEventListener("mousemove", onMouseMove);
                trigger.addEventListener("mouseleave", onMouseLeave);
            };

            const removeListeners = () => {
                trigger.removeEventListener("mousemove", onMouseMove);
                trigger.removeEventListener("mouseleave", onMouseLeave);
            };

            const init = () => {
                addListeners();
                raf.add(ticker);
            };

            const destroy = () => {
                removeListeners();
                raf.remove(rafId);
            };

            init();
            return { destroy };
        }

        function resolveOptions(node, options) {
            return {
                trigger: options?.trigger ?? node,
                target: options?.target
                    ? Array.isArray(options.target) ? options.target : [options.target]
                    : [node]
            };
        }

        // Global Raf Instance
        const raf = new Raf();

        // Slider state
        const TOTAL_SLIDES = 8;
        let currentIndex = 0;

        // Get all elements by index
        function getSlideElements(index) {
            return {
                slide: document.querySelector(`.slide[data-index="${index}"]`),
                slideInfo: document.querySelector(`.slide-info[data-index="${index}"]`),
                slideBg: document.querySelector(`.slide__bg[data-index="${index}"]`)
            };
        }

        // Update slider display
        function updateSlider() {
            const prevIndex = wrap(currentIndex - 1, TOTAL_SLIDES);
            const nextIndex = wrap(currentIndex + 1, TOTAL_SLIDES);

            // Clear all states
            document.querySelectorAll('.slide, .slide-info, .slide__bg').forEach(el => {
                el.removeAttribute('data-current');
                el.removeAttribute('data-previous');
                el.removeAttribute('data-next');
            });

            // Set current
            const current = getSlideElements(currentIndex);
            Object.values(current).forEach(el => el?.setAttribute('data-current', ''));

            // Set previous
            const previous = getSlideElements(prevIndex);
            Object.values(previous).forEach(el => el?.setAttribute('data-previous', ''));

            // Set next
            const next = getSlideElements(nextIndex);
            Object.values(next).forEach(el => el?.setAttribute('data-next', ''));

            // Update counter
            document.querySelector('.current-slide').textContent = currentIndex + 1;
        }

        function change(direction) {
            return () => {
                currentIndex = wrap(currentIndex + direction, TOTAL_SLIDES);
                updateSlider();
            };
        }

        function init() {
            const loader = document.querySelector(".loader");
            const slides = [...document.querySelectorAll(".slide")];
            const slidesInfo = [...document.querySelectorAll(".slide-info")];

            const buttons = {
                prev: document.querySelector(".slider--btn__prev"),
                next: document.querySelector(".slider--btn__next")
            };

            loader.style.opacity = 0;
            loader.style.pointerEvents = "none";

            // Initialize slider state
            updateSlider();

            // Add tilt effect to slides
            slides.forEach((slide, i) => {
                const slideInner = slide.querySelector(".slide__inner");
                const slideInfoInner = slidesInfo[i]?.querySelector(".slide-info__inner");
                if (slideInner && slideInfoInner) {
                    tilt(slide, { target: [slideInner, slideInfoInner] });
                }
            });

            buttons.prev.addEventListener("click", change(-1));
            buttons.next.addEventListener("click", change(1));

            // Keyboard navigation
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') change(-1)();
                if (e.key === 'ArrowRight') change(1)();
            });
        }

        function setup() {
            const loaderText = document.querySelector(".loader__text");
            const images = [...document.querySelectorAll("img")];
            const totalImages = images.length;
            let loadedImages = 0;
            let progress = { current: 0, target: 0 };

            images.forEach((image) => {
                imagesLoaded(image, (instance) => {
                    if (instance.isComplete) {
                        loadedImages++;
                        progress.target = loadedImages / totalImages;
                    }
                });
            });

            raf.add(({ id }) => {
                progress.current = lerp(progress.current, progress.target, 0.06);
                const progressPercent = Math.round(progress.current * 100);
                loaderText.textContent = `${progressPercent}%`;

                if (progressPercent === 100) {
                    init();
                    raf.remove(id);
                }
            });
        }

        // Start
        setup();
    </script>
</body>
</html>